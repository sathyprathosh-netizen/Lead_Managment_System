<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tenant Admin Dashboard | APEX-LMS</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/admin-portal.css">
    <style>
        :root {
            --anim-speed: 0.6s;
        }

        /* Premium Animations */
        @keyframes shimmer-fast {
            0% {
                transform: translateX(-150%);
            }

            100% {
                transform: translateX(150%);
            }
        }

        .shimmer-box {
            position: relative;
            overflow: hidden;
        }

        .shimmer-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transform: skewX(-20deg);
            animation: shimmer-fast 3s infinite linear;
        }

        @keyframes float-micro {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-4px);
            }
        }

        .float-item {
            animation: float-micro 4s ease-in-out infinite;
        }

        @keyframes pulse-soft {

            0%,
            100% {
                opacity: 1;
                transform: scale(1);
            }

            50% {
                opacity: 0.7;
                transform: scale(1.05);
            }
        }

        .pulse-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            display: inline-block;
            animation: pulse-soft 2s infinite;
        }

        /* UI Enhancements */
        .glass-top {
            background: rgba(30, 27, 75, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .kpi-card {
            background: white;
            border: 1px solid var(--color-admin-border);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        .kpi-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            border-color: var(--color-admin-secondary);
        }

        .sparkline {
            height: 30px;
            width: 80px;
            display: flex;
            align-items: flex-end;
            gap: 2px;
        }

        .spark-bar {
            flex: 1;
            background: var(--color-admin-secondary);
            border-radius: 1px;
            opacity: 0.5;
            transition: height 1s;
        }

        .kpi-card:hover .spark-bar {
            opacity: 1;
        }

        /* Restored and Enhanced Chart */
        .chart-container {
            height: 240px;
            display: flex;
            align-items: flex-end;
            gap: 15px;
            /* Increased gap */
            padding: 40px 0 20px 0;
            /* Space for tooltip */
            position: relative;
        }

        .bar-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            height: 100%;
            justify-content: flex-end;
            position: relative;
        }

        .bar {
            width: 100%;
            min-width: 25px;
            /* Ensure visibility */
            background: linear-gradient(to top, #1e1b4b, #3730a3);
            border-radius: 6px 6px 0 0;
            transition: height 0.8s cubic-bezier(0.34, 1.56, 0.64, 1), background 0.3s;
            position: relative;
            cursor: pointer;
        }

        .bar:hover {
            filter: brightness(1.2);
            transform: scaleX(1.1);
        }

        .bar.highlight {
            background: linear-gradient(to top, #06b6d4, #0891b2) !important;
        }

        .bar-label {
            font-size: 0.75rem;
            font-weight: 800;
            color: var(--color-admin-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Tooltip */
        .chart-tooltip {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%) translateY(-100%);
            background: var(--color-admin-primary);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 800;
            pointer-events: none;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            white-space: nowrap;
            z-index: 10;
        }

        .chart-tooltip::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            border-left: 5px solid transparent;
            border-right: 5px solid transparent;
            border-top: 5px solid var(--color-admin-primary);
        }

        .bar-group:hover .chart-tooltip {
            opacity: 1;
            transform: translateX(-50%) translateY(-120%);
        }

        .matrix-row {
            transition: all 0.3s;
        }

        .matrix-row:hover {
            background: #f8fafc;
            transform: scale(1.005);
        }

        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .toggle-active {
            box-shadow: 0 0 15px rgba(6, 182, 212, 0.3);
        }
    </style>
</head>

<body data-current-role="admin">

    <div class="dashboard-layout">
        <header class="admin-header glass-top">
            <div class="header-main">
                <a href="dashboard.html" class="brand">APEX<span>LMS</span></a>
                <div class="tenant-badge shimmer-box">Acme Global Inc.</div>

                <div class="user-profile">
                    <div style="text-align: right;" class="hide-mobile">
                        <div style="font-weight: 800; font-size: 0.9rem; color: white;" id="global-user-name">Alex Admin
                        </div>
                        <div
                            style="font-size: 0.7rem; color: var(--color-admin-secondary); font-weight: 800; text-transform: uppercase;">
                            Lead Instructor</div>
                    </div>
                    <div class="profile-avatar shimmer-box">AA</div>
                    <a href="../Index.html" class="btn btn-outline hide-mobile"
                        style="color: white; border-color: rgba(255,255,255,0.2); font-size: 0.8rem; padding: 6px 16px; margin-right: 8px; text-decoration: none; display: inline-flex; align-items: center;">Landing
                        Page</a>
                    <button class="btn btn-outline"
                        style="color: white; border-color: rgba(255,255,255,0.2); font-size: 0.8rem; padding: 6px 16px;"
                        onclick="APEX_SYSTEM.logout()">Logout</button>
                </div>
            </div>
            <nav class="admin-nav">
                <a href="dashboard.html" class="nav-item active">ðŸ“Š Dashboard Overview</a>
                <a href="content-studio.html" class="nav-item">ðŸ”¨ Content Studio</a>
                <a href="course-inventory.html" class="nav-item">ðŸ“š Course Inventory</a>
                <a href="learner-cohorts.html" class="nav-item">ðŸ‘¥ Learner Cohorts</a>
                <a href="question-library.html" class="nav-item">ðŸ§© Question Library</a>
                <a href="analytics.html" class="nav-item">ðŸ“ˆ Advanced Analytics</a>
            </nav>
        </header>

        <main class="main-scroll">
            <div class="admin-grid">

                <!-- KPI Section -->
                <div class="col-span-3 kpi-card animate-fade-in-up"
                    style="border-left: 4px solid var(--color-admin-secondary);">
                    <div class="flex justify-between">
                        <div class="kpi-label">Active Learners</div>
                        <div class="sparkline">
                            <div class="spark-bar" style="height: 40%"></div>
                            <div class="spark-bar" style="height: 60%"></div>
                            <div class="spark-bar" style="height: 30%"></div>
                            <div class="spark-bar" style="height: 80%"></div>
                            <div class="spark-bar" style="height: 90%"></div>
                        </div>
                    </div>
                    <div class="flex justify-between items-end">
                        <div class="kpi-value count-up" data-target="1284">0</div>
                        <div style="color: var(--color-success); font-size: 0.8rem; font-weight: 800;">â†‘ 14.2%</div>
                    </div>
                </div>

                <div class="col-span-3 kpi-card animate-fade-in-up delay-100"
                    style="border-left: 4px solid var(--color-admin-accent);">
                    <div class="flex justify-between">
                        <div class="kpi-label">Certifications Issued</div>
                        <div class="sparkline">
                            <div class="spark-bar" style="height: 20%; background: var(--color-admin-accent);"></div>
                            <div class="spark-bar" style="height: 40%; background: var(--color-admin-accent);"></div>
                            <div class="spark-bar" style="height: 70%; background: var(--color-admin-accent);"></div>
                            <div class="spark-bar" style="height: 50%; background: var(--color-admin-accent);"></div>
                            <div class="spark-bar" style="height: 85%; background: var(--color-admin-accent);"></div>
                        </div>
                    </div>
                    <div class="flex justify-between items-end">
                        <div class="kpi-value count-up" data-target="412">0</div>
                        <div style="color: var(--color-success); font-size: 0.8rem; font-weight: 800;">â†‘ 22.1%</div>
                    </div>
                </div>

                <div class="col-span-3 kpi-card animate-fade-in-up delay-200" style="border-left: 4px solid #f59e0b;">
                    <div class="flex justify-between">
                        <div class="kpi-label">Avg. Engagement</div>
                        <div class="sparkline">
                            <div class="spark-bar" style="height: 60%; background: #f59e0b;"></div>
                            <div class="spark-bar" style="height: 65%; background: #f59e0b;"></div>
                            <div class="spark-bar" style="height: 62%; background: #f59e0b;"></div>
                            <div class="spark-bar" style="height: 70%; background: #f59e0b;"></div>
                        </div>
                    </div>
                    <div class="flex justify-between items-end">
                        <div class="kpi-value">86.4%</div>
                        <div style="color: #f59e0b; font-size: 0.8rem; font-weight: 800;">â†’ Stable</div>
                    </div>
                </div>

                <div class="col-span-3 kpi-card animate-fade-in-up delay-300"
                    style="border-left: 4px solid var(--color-admin-primary);">
                    <div class="kpi-label">Revenue ROI (30D)</div>
                    <div class="flex justify-between items-end" style="margin-top: 15px;">
                        <div class="kpi-value">$14,280</div>
                        <div style="color: var(--color-success); font-size: 0.8rem; font-weight: 800;">â†‘ 8.4%</div>
                    </div>
                </div>

                <!-- Main Analytics Section With Interactive Logic -->
                <div class="col-span-8 kpi-card animate-fade-in-up delay-400">
                    <div class="flex justify-between items-center" style="margin-bottom: 24px;">
                        <div>
                            <h3 style="margin:0; font-size: 1.1rem;">Enrollment Velocity & Retention</h3>
                            <p style="font-size: 0.8rem; color: var(--color-admin-muted);">Interactive telemetry
                                orchestrator</p>
                        </div>
                        <div class="flex gap-sm">
                            <button id="toggle-daily" class="badge"
                                style="background: var(--color-admin-secondary); color: white; border: none; cursor: pointer; padding: 6px 16px;">Daily</button>
                            <button id="toggle-weekly" class="badge"
                                style="background: #f1f5f9; color: var(--color-admin-text); border: none; cursor: pointer; padding: 6px 16px;">Weekly</button>
                        </div>
                    </div>
                    <div class="chart-container" id="velocity-chart">
                        <!-- Bars will be dynamically populated/updated -->
                        <div class="bar-group">
                            <div class="chart-tooltip">420 Learners (+12%)</div>
                            <div class="bar highlight" style="height: 40%;"></div>
                            <div class="bar-label">Mon</div>
                        </div>
                        <div class="bar-group">
                            <div class="chart-tooltip">650 Learners (+8%)</div>
                            <div class="bar" style="height: 65%;"></div>
                            <div class="bar-label">Tue</div>
                        </div>
                        <div class="bar-group">
                            <div class="chart-tooltip">920 Learners (+24%)</div>
                            <div class="bar" style="height: 92%;"></div>
                            <div class="bar-label">Wed</div>
                        </div>
                        <div class="bar-group">
                            <div class="chart-tooltip">550 Learners (-2%)</div>
                            <div class="bar" style="height: 55%;"></div>
                            <div class="bar-label">Thu</div>
                        </div>
                        <div class="bar-group">
                            <div class="chart-tooltip">750 Learners (+15%)</div>
                            <div class="bar" style="height: 75%;"></div>
                            <div class="bar-label">Fri</div>
                        </div>
                        <div class="bar-group">
                            <div class="chart-tooltip">380 Learners (-5%)</div>
                            <div class="bar" style="height: 38%;"></div>
                            <div class="bar-label">Sat</div>
                        </div>
                        <div class="bar-group">
                            <div class="chart-tooltip">480 Learners (+4%)</div>
                            <div class="bar" style="height: 48%;"></div>
                            <div class="bar-label">Sun</div>
                        </div>
                    </div>
                </div>

                <!-- Support Queue -->
                <div class="col-span-4 kpi-card animate-fade-in-right delay-500">
                    <div class="flex justify-between items-center" style="margin-bottom: 20px;">
                        <h3 style="margin:0; font-size: 1.1rem;">Priority Sentinel</h3>
                        <span class="badge badge-warning" style="font-size: 0.65rem;">5 ACTIVE</span>
                    </div>
                    <div class="flex-col gap-md">
                        <div class="flex gap-md items-center float-item"
                            style="background: #fff1f2; border-radius: 8px; padding: 14px; border: 1px solid #fecaca;">
                            <div class="pulse-indicator" style="background: #ef4444;"></div>
                            <div style="flex: 1;">
                                <div style="font-weight: 800; font-size: 0.85rem; color: #9f1239;">Critical Access Block
                                </div>
                                <div style="font-size: 0.7rem; color: #b91c1c;">Sarah J. â€¢ 4m ago</div>
                            </div>
                            <button class="btn"
                                style="padding: 6px 14px; font-size: 0.7rem; background: white; border: 1.5px solid #ef4444; color: #ef4444;">Resolve</button>
                        </div>
                        <div class="flex gap-md items-center float-item"
                            style="background: #fdfaf1; border-radius: 8px; padding: 14px; border: 1px solid #fef3c7; animation-delay: 1s;">
                            <div class="pulse-indicator" style="background: #f59e0b;"></div>
                            <div style="flex: 1;">
                                <div style="font-weight: 800; font-size: 0.85rem; color: #92400e;">Syllabus Query</div>
                                <div style="font-size: 0.7rem; color: #92400e;">Mark T. â€¢ 12m ago</div>
                            </div>
                            <button class="btn"
                                style="padding: 6px 14px; font-size: 0.7rem; background: white; border: 1.5px solid #f59e0b; color: #f59e0b;">Reply</button>
                        </div>
                        <div class="flex gap-md items-center float-item"
                            style="background: #f0f9ff; border-radius: 8px; padding: 14px; border: 1px solid #bae6fd; animation-delay: 2s;">
                            <div class="pulse-indicator" style="background: #0ea5e9;"></div>
                            <div style="flex: 1;">
                                <div style="font-weight: 800; font-size: 0.85rem; color: #0369a1;">API Support Sync
                                </div>
                                <div style="font-size: 0.7rem; color: #0369a1;">Julia C. â€¢ 45m ago</div>
                            </div>
                            <button class="btn"
                                style="padding: 6px 14px; font-size: 0.7rem; background: white; border: 1.5px solid #0ea5e9; color: #0369a1;">Review</button>
                        </div>
                    </div>
                </div>

                <!-- Matrix Section -->
                <div class="col-span-12 kpi-card animate-fade-in-up delay-600 shimmer-box">
                    <div class="flex justify-between items-center" style="margin-bottom: 24px;">
                        <div>
                            <h3 style="margin:0; font-size: 1.2rem;">Curriculum Orchestration Matrix</h3>
                        </div>
                        <button class="btn btn-primary" style="padding: 10px 24px; font-size: 0.85rem;"
                            onclick="window.location.href='content-studio.html'">+ Add Advanced Program</button>
                    </div>
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="text-align: left; border-bottom: 2px solid var(--color-admin-border);">
                                <th
                                    style="padding: 14px; font-size: 0.7rem; color: var(--color-admin-muted); text-transform: uppercase;">
                                    Course Identity</th>
                                <th
                                    style="padding: 14px; font-size: 0.7rem; color: var(--color-admin-muted); text-transform: uppercase;">
                                    Learners</th>
                                <th
                                    style="padding: 14px; font-size: 0.7rem; color: var(--color-admin-muted); text-transform: uppercase;">
                                    Efficiency</th>
                                <th
                                    style="padding: 14px; font-size: 0.7rem; color: var(--color-admin-muted); text-transform: uppercase;">
                                    Status</th>
                                <th
                                    style="padding: 14px; font-size: 0.7rem; color: var(--color-admin-muted); text-transform: uppercase;">
                                    Actions</th>
                            </tr>
                        </thead>
                        <tbody id="matrix-body">
                            <tr class="matrix-row" style="border-bottom: 1px solid #f1f5f9;">
                                <td style="padding: 20px 14px;">
                                    <div style="font-weight: 800; color: var(--color-admin-primary);">Enterprise
                                        Security 101</div>
                                    <div style="font-size: 0.75rem; color: var(--color-admin-muted);">8 Modules â€¢
                                        Compliance Track</div>
                                </td>
                                <td style="padding: 20px 14px; font-weight: 800;">1,284</td>
                                <td style="padding: 20px 14px;">
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <div
                                            style="flex: 1; height: 8px; background: #e2e8f0; border-radius: 4px; min-width: 80px;">
                                            <div
                                                style="width: 74%; height: 100%; background: var(--color-admin-secondary); border-radius: 4px;">
                                            </div>
                                        </div>
                                        <span style="font-size: 0.85rem; font-weight: 800;">74%</span>
                                    </div>
                                </td>
                                <td style="padding: 20px 14px;"><span class="badge badge-success">Optimized</span></td>
                                <td style="padding: 20px 14px;"><button class="btn btn-outline"
                                        style="padding: 6px 14px; font-size: 0.75rem;">Manage</button></td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </main>
    </div>

    <!-- System Scripts -->
    <script src="../js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Chart Data
            const dailyData = [
                { label: 'Mon', value: 420, trend: '+12%', height: '40%' },
                { label: 'Tue', value: 650, trend: '+8%', height: '65%' },
                { label: 'Wed', value: 920, trend: '+24%', height: '92%' },
                { label: 'Thu', value: 550, trend: '-2%', height: '55%' },
                { label: 'Fri', value: 750, trend: '+15%', height: '75%' },
                { label: 'Sat', value: 380, trend: '-5%', height: '38%' },
                { label: 'Sun', value: 480, trend: '+4%', height: '48%' }
            ];

            const weeklyData = [
                { label: 'Wk 1', value: 2400, trend: '+5%', height: '45%' },
                { label: 'Wk 2', value: 2800, trend: '+16%', height: '52%' },
                { label: 'Wk 3', value: 3100, trend: '+10%', height: '58%' },
                { label: 'Wk 4', value: 4500, trend: '+45%', height: '85%' },
                { label: 'Wk 5', value: 4200, trend: '-6%', height: '78%' },
                { label: 'Wk 6', value: 5100, trend: '+21%', height: '95%' },
                { label: 'Wk 7', value: 4800, trend: '-5%', height: '90%' }
            ];

            const toggleDaily = document.getElementById('toggle-daily');
            const toggleWeekly = document.getElementById('toggle-weekly');
            const chartGroups = document.querySelectorAll('.bar-group');

            function updateChart(data) {
                chartGroups.forEach((group, i) => {
                    const item = data[i];
                    if (!item) return;

                    const bar = group.querySelector('.bar');
                    const tooltip = group.querySelector('.chart-tooltip');
                    const label = group.querySelector('.bar-label');

                    // Apply new state
                    bar.style.height = item.height;
                    label.textContent = item.label;
                    tooltip.innerHTML = `${item.value.toLocaleString()} Learners (${item.trend})`;

                    // Trigger highlight on highest value
                    const values = data.map(d => d.value);
                    const maxValue = Math.max(...values);
                    if (item.value === maxValue) {
                        bar.classList.add('highlight');
                    } else {
                        bar.classList.remove('highlight');
                    }
                });
            }

            toggleDaily.addEventListener('click', () => {
                toggleDaily.style.background = 'var(--color-admin-secondary)';
                toggleDaily.style.color = 'white';
                toggleWeekly.style.background = '#f1f5f9';
                toggleWeekly.style.color = 'var(--color-admin-text)';
                updateChart(dailyData);
            });

            toggleWeekly.addEventListener('click', () => {
                toggleWeekly.style.background = 'var(--color-admin-secondary)';
                toggleWeekly.style.color = 'white';
                toggleDaily.style.background = '#f1f5f9';
                toggleDaily.style.color = 'var(--color-admin-text)';
                updateChart(weeklyData);
            });

            // Initial counter animation
            APEX_SYSTEM.animateCounter = (el) => {
                const targetText = el.getAttribute('data-target');
                const target = parseInt(targetText.replace(/,/g, ''));
                let current = 0;
                const duration = 2000;
                const increment = target / (duration / 30);
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        el.textContent = target.toLocaleString();
                        clearInterval(timer);
                    } else {
                        el.textContent = Math.floor(current).toLocaleString();
                    }
                }, 30);
            };
            document.querySelectorAll('.count-up').forEach(el => APEX_SYSTEM.animateCounter(el));
        });
    </script>
</body>

</html>